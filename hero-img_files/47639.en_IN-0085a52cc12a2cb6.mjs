"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[47639],{771929:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(883119),n=o(140017),l=o(785893);function a({color:e,onClick:t,overrideText:o}){let a=(0,n.ZP)(),s=o||a.bt("Got it", "Got it", "Acknowledge protected account modal message", undefined, true);return(0,l.jsx)(i.zx,{accessibilityLabel:s,color:e||"gray",fullWidth:!0,onClick:t,text:s})}},505433:(e,t,o)=>{o.d(t,{Z:()=>c});var i=o(667294),n=o(883119),l=o(278967),a=o(30378),s=o(55202),r=o(785893);function c({children:e,headingNode:t,heading:o,onDismiss:c,size:_}){return(0,i.useEffect)(()=>(a.Z.pause(),function(){a.Z.resume()}),[]),(0,r.jsx)(n.mh,{zIndex:l.C,children:(0,r.jsx)(s.Z,{allowEsc:!0,children:(0,r.jsx)(n.u_,{accessibilityModalLabel:o,heading:t||o,onDismiss:()=>{a.Z.resume(),c()},padding:"none",role:"alertdialog",size:_||"md",children:e})})})}},353971:(e,t,o)=>{o.d(t,{Z:()=>d});var i=o(667294),n=o(883119),l=o(771929),a=o(505433),s=o(559356),r=o(140017),c=o(339001),_=o(785893);function d({onClose:e}){let t=(0,r.ZP)(),o=t.bt("Common reasons for account deactivation include:", "Common reasons for account deactivation include:", " - ", undefined, true),d=t.bt("{{ help_link }} if you have questions or would like to reactivate your account.", "{{ help_link }} if you have questions or would like to reactivate your account.", " - ", undefined, true),u=[t.bt("Violating Pinterest Community Guidelines.", "Violating Pinterest Community Guidelines.", "One example reason for account deactivation", undefined, true),t.bt("We noticed unusual activity on your account.", "We noticed unusual activity on your account.", "One example reason for account deactivation", undefined, true),t.bt("You requested an account closure.", "You requested an account closure.", "One example reason for account deactivation", undefined, true)];return(0,_.jsx)(a.Z,{heading:t.bt("Your account has been deactivated", "Your account has been deactivated", "Modal heading for user who have attempted to login with a deactivated account", undefined, true),onDismiss:e,size:"md",children:(0,_.jsxs)(n.xu,{marginBottom:4,paddingX:6,children:[(0,_.jsxs)(n.xu,{marginBottom:4,children:[(0,_.jsxs)(n.xv,{children:[" ",o," "]}),(0,_.jsx)(n.xu,{paddingY:2,children:(0,_.jsx)(i.Fragment,{children:u.map(e=>(0,_.jsx)(n.xv,{children:"• "+e},`reasons-${e}`))})}),(0,_.jsx)(n.xv,{inline:!0,children:(0,c.nk)(d,{help_link:(0,_.jsx)(s.q,{},"suspended user help_link")})})]}),(0,_.jsx)(n.xu,{marginTop:4,children:(0,_.jsx)(l.Z,{color:"red",onClick:e,overrideText:t.bt("Got it", "Got it", "Acknowledge suspended account modal message", undefined, true)})})]})})}},559356:(e,t,o)=>{o.d(t,{q:()=>a});var i=o(883119),n=o(140017),l=o(785893);let a=()=>{let e=(0,n.ZP)();return(0,l.jsx)(i.rU,{display:"inlineBlock",href:"https://help.pinterest.com/en/contact?current_page=about_you_page&appeals=account_suspension",onClick:({dangerouslyDisableOnNavigation:e})=>e(),underline:"auto",children:e.bt("Contact us", "Contact us", "link text shown to redirect to help.pinterest.com for appealing a suspension", undefined, true)})}},175324:(e,t,o)=>{o.d(t,{Z:()=>g});var i=o(667294),n=o(883119),l=o(587703),a=o(140017),s=o(494125),r=o(785893);function c({handleSignup:e,handleLogin:t}){let o=(0,a.ZP)(),[l,c]=(0,i.useState)(!1),_=(0,i.useRef)(null);return(0,s.Z)(()=>{let t;return _.current=window.setTimeout(()=>{t=window.requestAnimationFrame(()=>{c(!0)}),e()},2e3),()=>{_.current&&window.clearTimeout(_.current),t&&window.cancelAnimationFrame(t)}}),(0,r.jsxs)(n.kC,{alignItems:"center",direction:"column",flex:"grow",justifyContent:"center",children:[(0,r.jsx)(n.xu,{children:(0,r.jsx)(n.xv,{align:"center",weight:"bold",children:(0,r.jsx)("span",{className:"deprecatedTextSizeXL",children:l?o.bt("Finishing up...", "Finishing up...", "Title of a dialog telling the user that an account is almost done being created.", undefined, true):o.bt("Creating your account...", "Creating your account...", "Title of a dialog telling the user that an account is being created.", undefined, true)})})}),(0,r.jsx)(n.xu,{paddingY:4,children:(0,r.jsx)(n.$j,{accessibilityLabel:o.bt("Account is being created", "Account is being created", "Accessibility label for account creation loading dialog", undefined, true),show:!0})}),l?null:(0,r.jsx)(n.xu,{marginTop:2,children:(0,r.jsx)(n.xv,{align:"center",inline:!0,children:o.bt("Didn’t mean to create a new account?", "Didn’t mean to create a new account?", "Description text telling the user that they can log in if they did not intend to create a new account", undefined, true)})}),l?null:(0,r.jsx)(n.xu,{children:(0,r.jsx)(n.xv,{align:"center",inline:!0,children:(0,r.jsx)(n.rU,{display:"inlineBlock",href:"/login",onClick:({event:e,dangerouslyDisableOnNavigation:o})=>{o(),_.current&&window.clearTimeout(_.current),e&&(e.preventDefault(),e.stopPropagation()),t()},underline:"hover",children:o.bt("Click here to log in.", "Click here to log in.", "Login button which will show the login modal and enable the user to log in", undefined, true)})})})]})}var _=o(120726),d=o(610954);let u=({children:e})=>(0,r.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.6)"}},left:!0,opacity:1,position:"fixed",right:!0,top:!0,zIndex:new n.Ry(1e3),children:(0,r.jsx)(n.xu,{color:"default",direction:"column",display:"flex",margin:6,padding:7,position:"fixed",right:!0,rounding:2,top:!0,width:376,children:e})});function g({handleCancelClick:e,handleConfirmSignup:t,handleShowLogin:o,step:g}){let p=(0,a.ZP)(),[h,m]=(0,i.useState)(!1),x=(0,l.Z)(),y={view_type:10,view_parameter:3202};(0,s.Z)(()=>(x({event_type:120,view_parameter:y.view_parameter}),document.body&&(document.body.style.overflow="hidden"),()=>{document.body&&(document.body.style.overflow="")}));let f=()=>{x({...y,event_type:101,element:30}),o()};return(0,r.jsx)(u,{children:"delayedSignupLoadingSpinner"===g?(0,r.jsx)(c,{handleLogin:f,handleSignup:()=>{x({...y,event_type:101,element:31}),t()}}):(0,r.jsxs)(n.xu,{children:[h?(0,r.jsx)(d.Z,{}):null,(0,r.jsx)(n.xu,{display:"inlineBlock",marginEnd:2,marginTop:2,position:"absolute",right:!0,top:!0,children:(0,r.jsx)(n.hU,{accessibilityLabel:p.bt("Cancel", "Cancel", "Button to close the signup/login modal", undefined, true),icon:"cancel",iconColor:"gray",onClick:()=>{x({...y,event_type:101,element:73}),e()},size:"sm"})}),(0,r.jsx)(n.xv,{align:"start",weight:"bold",children:(0,r.jsx)("span",{className:"deprecatedTextSizeXL",children:p.bt("Continue to Pinterest", "Continue to Pinterest", "Title of a dialog telling enabling the user to continue with sign up or log in", undefined, true)})}),(0,r.jsx)(n.xu,{marginTop:2,children:(0,r.jsx)(n.xv,{align:"start",children:p.bt("Hmm, it looks like you don't have an account yet. Let's get started!", "Hmm, it looks like you don't have an account yet. Let's get started!", "Description text of a dialog asking the user to sign up for a Pinterest account", undefined, true)})}),(0,r.jsx)(n.xu,{marginTop:5,children:(0,r.jsx)(n.zx,{color:"red",fullWidth:!0,onClick:()=>{x({...y,event_type:101,element:31}),m(!0),t()},text:p.bt("Sign up", "Sign up", "Text on a button which will create an account when clicked", undefined, true)})}),(0,r.jsx)(n.xu,{marginTop:2,children:(0,r.jsx)(n.zx,{color:"gray",fullWidth:!0,onClick:f,text:p.bt("Log in using a different method", "Log in using a different method", "Text on a button which will take the user to login when clicked.", undefined, true)})}),"staticSignupLoginWithTOS"===g?(0,r.jsx)(n.xu,{marginEnd:4,marginStart:4,marginTop:4,children:(0,r.jsx)(_.Z,{dark:!0})}):null]})})}},120726:(e,t,o)=>{o.d(t,{E:()=>r,Z:()=>_});var i=o(883119),n=o(140017),l=o(339001),a=o(702497),s=o(785893);let r=`
.TermsOfService__light a {
  color: rgba(255,255,255,0.9);
}
`,c={dark:{color:"#767676",width:"224px"},light:{color:"rgba(255,255,255,0.9)",lineHeight:"150%",margin:"10px auto",textShadow:"0 1px rgba(0,0,0,0.18)",width:"272px"},revampedBizSignup:{color:"#5f5f5f",fontSize:"12px",fontWeight:"400"}};function _({dark:e,container:t=""}){let o;let r=(0,n.ZP)();return o="revamped_business_login_page"===t?"revampedBizSignup":e?"dark":"light",(0,s.jsx)(i.xu,{marginTop:3,children:(0,s.jsx)("span",{className:e?"":"TermsOfService__light",color:"revampedBizSignup"===o?"subtle":void 0,"data-test-id":"terms-of-service",style:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",fontSize:"11px",fontWeight:"normal",textAlign:"center",WebkitTransition:"opacity .2s linear",transition:"opacity .2s linear",...c[o]},children:(0,s.jsx)("span",{children:(0,l.nk)(r.bt("By continuing, you agree to Pinterest's {{ tos }} and acknowledge that you've read our {{ privacyPolicy }}. {{ noticeAtCollection }}.", "By continuing, you agree to Pinterest's {{ tos }} and acknowledge you've read our {{ privacyPolicy }}. {{ noticeAtCollection }}.", "termOfService.text", undefined, true),{tos:(0,s.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{fontWeight:"bold",..."revampedBizSignup"!==o&&{color:"#111"}}},"data-test-id":"tos",display:"inlineBlock",children:(0,s.jsx)(i.rU,{display:"inlineBlock",href:a.U5h,target:"blank",underline:"hover",children:r.bt("Terms of Service", "Terms of Service", "termOfService.link.tos", undefined, true)},"tos")},"tos"),privacyPolicy:(0,s.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{fontWeight:"bold",..."revampedBizSignup"!==o&&{color:"#111"}}},"data-test-id":"privacy",display:"inlineBlock",children:(0,s.jsx)(i.rU,{display:"inlineBlock",href:"/_/_/policy/privacy-policy/",target:"blank",underline:"hover",children:r.bt("Privacy Policy", "Privacy Policy", "termOfService.link.privacyPolicy", undefined, true)},"privacy")},"privacy"),noticeAtCollection:(0,s.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{fontWeight:"bold",..."revampedBizSignup"!==o&&{color:"#111"}}},"data-test-id":"noticeAtCollection",display:"inlineBlock",children:(0,s.jsx)(i.rU,{display:"inlineBlock",href:a.cvl,target:"blank",underline:"hover",children:r.bt("Notice at collection", "Notice at collection", "termOfService.link.noticeAtCollection", undefined, true)},"noticeAtCollection")},"noticeAtCollection")})})})})}},239493:(e,t,o)=>{o.d(t,{o:()=>s,x:()=>a});var i=o(667294),n=o(140017);let l=new Set,a=e=>{l.forEach(t=>t(e))},s=e=>{let t=(0,n.ZP)();(0,i.useEffect)(()=>{let o=o=>{e(o||t.bt("Unknown error", "Unknown Error", "unauth.error.modal.unknown", undefined, true))};return l.add(o),()=>{l.delete(o)}},[])}},322079:(e,t,o)=>{o.d(t,{Z:()=>A});var i=o(667294),n=o(216167),l=o(224796),a=o(214877),s=o(658583),r=o(622541),c=o(165736),_=o(123526),d=o(820428),u=o(96452),g=o(488726),p=o(467707),h=o(508218),m=o(182962),x=o(891276),y=o(535053),f=o(228441),w=o(731714),v=o(217058),b=o(722363),k=o(546689),P=o(953565);function A(){let e=(0,g.hq)(),t=(0,m.Z)(),{logContextEvent:o}=(0,a.v)(),A=(0,b.Z)();return(0,i.useCallback)(({creds:i,isAccountSwitch:a,loggingOptions:{loggingData:g=Object.freeze({}),loginAttemptContextEvent:m},recaptchaV2Token:b,recaptchaV3Token:z})=>{t();let S=!!(i.facebook_autologin||i.autologin),T=(0,h.eD)(i);w.Z.setItem(l.V6,(0,h.nY)(i));let j=e=>{let t=i.google_open_id_token?"google":"facebook";S&&(0,v.dy)({event:e,provider:t})},O=e=>{S||(0,v.EX)({event:e,provider:(0,h.nY)(i)})},C=e=>{o({...m,event_type:e,aux_data:{...m.aux_data,upsell_reason:m.aux_data?.upsell_reason||(S?"autologin":w.Z.getItem(l.bg)||null),upsell_view_count:w.Z.getItem(l.w0)||0}}),7536===e&&w.Z.setItem(l.w0,0)};C(7534),A({action:S?"autologin":"login",event:"attempt",trigger:g.trigger,type:T});let Z=e=>{let t="referrer_unknown";try{let e=document.referrer;t=e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(e){}let o=g===Object(g)?g.container:"container_unknown";(0,v.My)("login.referrer."+t+"."+T),(0,v.My)("login.container."+String(o)+"."+T),(0,v.My)("login.type."+T);let n=T||"method_unknown",l=g.page||"page_unknown";i.facebook_autologin?((0,v.My)("web_autologin_facebook"),(0,v.My)("new_web_autologin_facebook",{page:l,referrer:t,container:o})):((0,v.My)(`web_login.${n}.success.${l}.${String(o)}.${t}.tier1`),(0,P.nP)(`web_login.${n}.success.${l}.${String(o)}.${t}.tier1`),(0,v.My)(`new_web_login.${n}.success`,{page:l,referrer:t,container:o})),(0,x.ko)({country:e?.country,countryFromHostName:e?.countryFromHostName,countryFromIp:e?.countryFromIp,regionFromIp:e?.regionFromIp,deviceType:"Desktop",eventCategory:"Logins"}),C(7536),A({action:S?"autologin":"login",event:"success",trigger:g&&g.trigger,type:T})},L=({error:e,isCrossDomain:t})=>{if(!e)return;let o=e.http_status===y.Ej?y.Ej:e.api_error_code,i=o;o&&u.qF.has(o)&&(i=u.qF.get(o));let{container:n,trigger:l}=g;(0,v.My)(`${t?"unauth_web_client_cctld_login_api_error":"unauth_web_client_login_api_error"}.${String(i)}.${n||"unknow_container"}.${T}`),C(7535),A({action:S?"autologin":"login",event:"fail",trigger:l,type:T})};if(i.username_or_email&&!i.mfa_resend&&e&&-1!==p.Z.indexOf(e.origin)){let t=e=>(0,v.My)(`web_cross_domain_login.${e}.${(0,h.eD)(i)}`);t("attempt");let{referrer:o,facebookToken:n,unauthId:l}=e;return(0,c.pH)(i,{recaptchaV3Token:z,referrer:o,facebookToken:n,unauthId:l}).then(e=>{let o=e&&e.data;if(o)return t("success_with_token"),(0,c.kv)(o).then(()=>(t("success_token_exchanged"),Z(),Promise.resolve()),e=>{throw t("success_token_not_exchanged"),e});throw t("success_without_token"),Error()},e=>{throw t("failure"),L({error:e,isCrossDomain:!0}),e})}j("login_api_call_start"),O("login_api_call_start");let I=(0,k.OJ)(),B=n.Z.create("UserSessionResource",{...i,...I?{referrer:I}:Object.freeze({}),get_user:i.get_user||i.switch_account&&a,app_type_from_client:7===e.appType?7:5,visited_pages_before_login:(0,k.t_)()||null,recaptchaV2Token:b,recaptchaV3Token:z});return B.callCreate({showError:!1,async:!0}).then(e=>{let{country:t,country_from_hostname:o,country_from_ip:i,region_from_ip:n}=e?.client_context||Object.freeze({});return Z({country:t,countryFromHostName:o,countryFromIp:i,regionFromIp:n}),j("login_api_call_success"),O("login_api_call_success"),(0,_.B)(!1),(0,d.Z)(),s.zN(r.e7.name),s.zN(r.x3.name),(0,f.Dm)("login").then(()=>e)},e=>(L({error:e,isCrossDomain:!1}),j("login_api_call_failure"),O("login_api_call_failure"),Promise.reject(e)))},[e,t,o,A])}},278967:(e,t,o)=>{o.d(t,{C:()=>l,P:()=>n});var i=o(883119);let n=new i.Ry(1e4),l=new i.H3([n])},123526:(e,t,o)=>{o.d(t,{B:()=>a,a:()=>l});var i=o(224796),n=o(731714);let l=()=>!!n.Z.getItem(i.WM),a=e=>{n.Z.setItem(i.WM,!!e)}},237856:(e,t,o)=>{o.d(t,{H:()=>r,M:()=>s});var i=o(658583),n=o(622541),l=o(217058);let a=()=>!!i.U2(n.x3),s=()=>{let e=i.U2(n.yu);return e?Math.floor((new Date().getTime()-new Date(e).getTime())/864e5):-1},r=()=>(i.U2(n.e7)&&(0,l.My)(`pcons.non_google_autologin_disabled_cookie.${s()}`),a()||!!i.U2(n.e7))},505573:(e,t,o)=>{o.d(t,{Z:()=>l});var i=o(616550);let n=Object.freeze({"/:username":"profile","/:username/:slug/:section_slug":"board","/:username/:slug":"board","/csrf_error":"csrfError","/email_verification_error":"emailVerificationError","/email/remove":"emailRemove","/email/subscription":"emailSubscription","/ideas":"ideasRoot","/ideas/:interest/:id":"ideasHub","/invited":"invited","/password/reset":"passwordReset","/pin/:id":"pin","/pin/:id/feedback":"pinFeedBack","/pin/:id/sent":"pinFeedBack","/pin/:id/visual-search":"flashlight","/pin/create/:method":"pinBookmarklet","/pw/:username":"resetPasswordUsername","/panic/":"panic","/search/:scope":"search","/shopping":"shoppingRoot","/shopping/:category/:id":"shoppingCategory","/today":"todayTab","/today/:term/:title/:articleId":"todayArticleFeed","/today/popular/:interest/:interestId":"todayArticleInterestFeed","/tv":"LiveSessionEvent","/tv/:pin_id":"liveSessionCloseup","/unlink":"unlinkAccount","/videos":"videosRoot","/videos/:category/:id":"videosCategory"}),l=()=>{let{path:e}=(0,i.$B)();return n[e]||"unknown"}},647639:(e,t,o)=>{o.r(t),o.d(t,{default:()=>X});var i=o(667294),n=o(616550),l=o(224796),a=o(197059),s=o(658583),r=o(622541),c=o(353971),_=o(239493),d=o(877457),u=o(322079),g=o(454514),p=o(140017),h=o(96157),m=o(96452),x=o(640258),y=o(897650),f=o(624797);let w=({isDesktop:e,location:t,history:o})=>{let i=o&&o.location.state?.isAppFactoryOAuth||((0,f.mB)(t.search).next??"").startsWith("/app-factory-oauth/");return i||(0,h.l$)(t)||(0,h.re)(t)||(0,h.OK)(t)||(0,h.Ni)(t)||(0,h.dt)(t)||e&&("/invited"===t.pathname||t.pathname.startsWith("/about/"))};var v=o(974371),b=o(11453),k=o(508218),P=o(516256),A=o(992083),z=o(237856),S=o(5859),T=o(731714),j=o(217058),O=o(13848),C=o(554786),Z=o(149722),L=o(546689),I=o(505573),B=o(310822),N=o(27460),D=o(883119),E=o(587703),M=o(175324),U=o(930837),G=o(766311),W=o(785893);function $({handleShowLogin:e,handleConfirmSignup:t,handleCancelClick:o}){let i=(0,p.ZP)(),n=(0,E.Z)();return(0,W.jsx)(G.Z,{viewParameter:3202,viewType:10,children:(0,W.jsx)(U.ZP,{accessibilityModalLabel:"",closeOnOutsideClick:!1,isOpen:!0,onDismiss:()=>{},type:"google_one_tap",children:(0,W.jsxs)(D.xu,{padding:6,children:[(0,W.jsx)(D.xu,{display:"inlineBlock",marginEnd:2,marginTop:2,position:"absolute",right:!0,top:!0,children:(0,W.jsx)(D.hU,{accessibilityLabel:i.bt("Cancel", "Cancel", "Button to close the signup/login modal", undefined, true),icon:"cancel",iconColor:"gray",onClick:()=>{n({element:73,event_type:102,view_parameter:3202,view_type:10}),o()},size:"sm"})}),(0,W.jsx)(D.xv,{align:"start",weight:"bold",children:(0,W.jsx)("span",{className:"deprecatedTextSizeXL",children:i.bt("Continue to Pinterest", "Continue to Pinterest", "Title of a dialog telling enabling the user to continue with sign up or log in", undefined, true)})}),(0,W.jsx)(D.xu,{marginTop:2,children:(0,W.jsx)(D.xv,{align:"start",children:i.bt("Hmm, it looks like you don't have an account yet. Let's get started!", "Hmm, it looks like you don't have an account yet. Let's get started!", "Description text of a dialog asking the user to sign up for a Pinterest account", undefined, true)})}),(0,W.jsx)(D.xu,{marginTop:5,children:(0,W.jsx)(D.zx,{color:"red",fullWidth:!0,onClick:()=>{(0,j.NC)("press_one_tap_modal_signup"),n({element:31,event_type:102,view_parameter:3202,view_type:10}),t()},text:i.bt("Sign up", "Sign up", "Text on a button which will create an account when clicked", undefined, true)})}),(0,W.jsx)(D.xu,{marginTop:2,children:(0,W.jsx)(D.zx,{color:"gray",fullWidth:!0,onClick:()=>{n({element:30,event_type:102,view_parameter:3202,view_type:10}),e()},text:i.bt("Log in using a different method", "Log in using a different method", "Text on a button which will take the user to login when clicked", undefined, true)})})]})})})}let F=({step:e,...t})=>"mobile"===e?(0,W.jsx)($,{...t}):(0,W.jsx)(M.Z,{...t,step:e});function R(e,t,o){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class H extends i.PureComponent{constructor(...e){super(...e),R(this,"state",{isAttemptingSignup:!1,modal:null,showAccountSuspended:!1}),R(this,"prompt",()=>{y.Fm()?.prompt(()=>{})}),R(this,"deferredHandleOneTapResponse",e=>{let{autologinIsDisabled:t}=this.props,o=(0,y.PL)(e.select_by);if("SIGN_IN_WITH_GOOGLE_BUTTON"===o){this.handleOneTapResponse(e);return}"AUTO_LOGIN"===o&&t||setTimeout(()=>{this.handleOneTapResponse(e)},3e3)}),R(this,"attemptSignup",async({googleOpenId:e})=>{let{history:t,pageType:o,showDesktopGoogleOneTapTriggeredModal:i}=this.props,n=(0,x.Z)(e),l={type:"google",google_open_id_token:e,first_name:n.given_name,last_name:n.family_name,image_url:n.picture};(0,j.NC)("attempt_signup_with_one_tap"),i?i({type:"GDPR_REQUIRES_AGE",socialRegistrationCredentials:{type:"google_one_tap",context:{container:"google_one_tap_modal",page:o},signupOptions:l}}):(this.setState({isAttemptingSignup:!1,modal:null}),t.push({pathname:"/signup/thirdpartyage/",state:{signupOptions:l,progressBarAnimationDuration:4500}}))})}async componentDidMount(){let{autologinIsDisabled:e,googleSignInApi:t}=this.props;await t.ensureInit("oneTap",this.deferredHandleOneTapResponse),e||this.prompt()}componentDidUpdate(e){e.autologinIsDisabled&&!this.props.autologinIsDisabled&&this.prompt()}componentWillUnmount(){"phone"===this.props.deviceType?y.Fm()?.cancel():window.smartlock?.cancelLastOperation?.()}async handleOneTapResponse(e){let{authenticationClient:t,deviceType:o,history:i,shouldSeeAuthOneTapModalExp:n,location:a,pageType:s,showError:r,showDesktopGoogleOneTapTriggeredModal:c}=this.props,{credential:_,select_by:d}=e,u=(0,y.PL)(d),g="AUTO_LOGIN"===u;n&&(T.Z.setItem(l.tr,!0),(0,j.My)(`auth_onetap_modal.click.${u}`)),g?(0,A.Z)({type:"autologin",status:"start"}):(0,A.Z)({type:"manualLoginAttempt",fromConnectButton:"SIGN_IN_WITH_GOOGLE_BUTTON"===u});try{let e={google_open_id_token:_,autologin:g},n=(0,y.mK)(u),l={event_type:7534,element:"SIGN_IN_WITH_GOOGLE_BUTTON"===u?12981:"ONE_TAP_PROMPT"===u?12982:null,view_type:10,view_parameter:3201,aux_data:{signup_login_method:P.Z.GOOGLE_ONE_TAP,upsell_reason:"google_one_tap"}};"desktop"===o?await t.desktopLogin({creds:e,loggingOptions:{loggingData:{container:"google_one_tap_modal",page:s,trigger:n},loginAttemptContextEvent:l}}):await t.mobileLogin(e,i,(0,L.Yy)(a)||a.pathname,{isAutologin:g,trigger:n},l),g&&(0,A.Z)({type:"autologin",status:"success"}),c&&k.ZP.handleRedirectWithFallbackWindowLocation()}catch(e){g&&(0,A.Z)({type:"autologin",status:"failure"}),c?e?.api_error_code===m.xN?"SIGN_IN_WITH_GOOGLE_BUTTON"!==u&&((0,h.C$)(a)||(0,h.Xn)(a))?((0,j.NC)("show_one_tap_modal_static"),this.setState({modal:{step:(0,h.C$)(a)?"staticSignupLogin":(0,h.Xn)(a)?"staticSignupLoginWithTOS":g?"staticSignupLogin":"delayedSignupLoadingSpinner",handleConfirmSignup:()=>{this.attemptSignup({googleOpenId:_})}}})):this.attemptSignup({googleOpenId:_}):e?.api_error_code===m.Zn?c({type:"MFA",mfaGoogleOpenId:_}):e?.api_error_code===m.an?this.setState({showAccountSuspended:!0}):(r({action:"login",ui:"modal"}),c({type:"LOGIN_ERROR"})):e?.api_error_code===m.xN&&"tablet"!==o?(0,h.C$)(a)?((0,j.NC)("show_one_tap_modal_mobile"),this.setState({modal:{step:"mobile",handleConfirmSignup:()=>{this.attemptSignup({googleOpenId:_})}}})):this.attemptSignup({googleOpenId:_}):r({action:"login",ui:"toast",message:e.message})}}render(){let{showAccountSuspended:e,modal:t,isAttemptingSignup:o}=this.state,{history:i,location:n,showDesktopGoogleOneTapTriggeredModal:l}=this.props;return e?(0,W.jsx)(c.Z,{onClose:()=>this.setState({showAccountSuspended:!1})}):!l&&o?(0,W.jsx)(B.Z,{progressBarAnimationDuration:4500}):t?(0,W.jsx)(F,{handleCancelClick:()=>this.setState({modal:null}),handleConfirmSignup:t.handleConfirmSignup,handleShowLogin:l?()=>l({type:"CLICK_LOGIN_BUTTON"}):()=>{this.setState({modal:null}),i.push({pathname:"/login/",state:{next:n.pathname}})},step:t.step}):null}}let q=()=>{let{isAuth:e,isLimitedLogin:t}=(0,Z.Z)(),{country:o,isBot:i}=(0,S.B)(),l=(0,C.ZP)(),a=(0,n.TH)(),c=(0,n.k6)();return s.U2(r.e7)&&(0,j.My)(`pcons.google_autologin_disabled_cookie.${(0,z.M)()}`),e&&!t||i||"CH"===o||!!s.U2(r.e7)||w({isDesktop:"desktop"===l,location:a,history:c})};function X(){let e=(0,p.ZP)(),t=(0,C.ZP)(),o=(0,n.TH)(),i=(0,n.k6)(),{showToast:l}=(0,O.F9)(),s=(0,I.Z)(),r=(0,a.Z)(),c=(0,v.M)(),h=(0,d.g)(),m=h?.showGoogleOneTapTriggeredModal,x=q(),y=(0,u.Z)(),f=(0,N.f)(),w=(0,Z.Z)(),k=(0,b.jr)(w);return c?(0,W.jsx)(H,{authenticationClient:{desktopLogin:y,mobileLogin:f},autologinIsDisabled:!k&&x,deviceType:t,googleSignInApi:c,history:i,i18n:e,location:o,navigateAfterLoginStatusChange:r,pageType:s,shouldSeeAuthOneTapModalExp:k,showDesktopGoogleOneTapTriggeredModal:m,showError:({action:t,ui:o,message:i})=>{let n="signup"===t?e.bt("We couldn’t sign you up with that account. Try the Google button.", "We couldn’t sign you up with that account. Try the Google button!", " - ", undefined, true):e.bt("We couldn’t log you in with that account. Try the Google button.", "We couldn’t log you in with that account. Try the Google button!", " - ", undefined, true),a=i||n;"toast"===o?l(({hideToast:e})=>(0,W.jsx)(g.ZP,{onHide:e,text:a})):(0,_.x)(a)}}):null}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/47639.en_IN-0085a52cc12a2cb6.mjs.map